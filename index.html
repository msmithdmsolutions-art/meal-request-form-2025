<!DOCTYPE html>
<html>
<head>
  <title>Check Delivery Distance</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAV0P1ms-rtH_nEFDST5EB0WpbZCw4dESA&libraries=places"></script>
  <script>
    let autocomplete;
    const originAddress = "8908 Smokey Drive, Plano, TX 75025";
    const maxDistanceMeters = 16093; // 10 miles

    function initAutocomplete() {
      const input = document.getElementById("address");
      autocomplete = new google.maps.places.Autocomplete(input, { types: ['address'] });
      autocomplete.addListener('place_changed', onPlaceChanged);
    }

    function onPlaceChanged() {
  const place = autocomplete.getPlace();
  if (!place.geometry) {
    // No alert â€” just silently ignore until user picks valid place
    return;
  }

  const destination = place.formatted_address;
  const service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix(
    {
      origins: [originAddress],
      destinations: [destination],
      travelMode: 'DRIVING',
    },
    (response, status) => {
      if (status !== 'OK') {
        alert('Error: ' + status);
        return;
      }
      const distanceMeters = response.rows[0].elements[0].distance.value;
      if (distanceMeters <= maxDistanceMeters) {
        alert("Address is within delivery area!");
      } else {
        alert("Sorry, address is outside our delivery area.");
      }
    }
  );
}

  </script>
</head>
<body onload="initAutocomplete()">
  <h1>Check Delivery Distance</h1>
  <input id="address" placeholder="Enter your address" type="text" style="width: 300px;" />
</body>
</html>
